# Configuração Completa para rust-mlagents
# Este arquivo demonstra todos os parâmetros disponíveis

behaviors:
  MoonlanderAgent:
    trainer_type: ppo
    hyperparameters:
      batch_size: 64           # Tamanho do batch para atualização
      buffer_size: 2048        # Tamanho do buffer de experiências
      learning_rate: 0.0003    # Taxa de aprendizado
      beta: 0.005             # Entropia (exploração vs exploitação)
      epsilon: 0.2            # Clipping do PPO
      lambd: 0.95             # GAE lambda
      num_epoch: 3            # Número de épocas de treinamento por update
    
    network_settings:
      normalize: false        # Normalizar observações
      hidden_units: 64        # Neurônios por camada oculta
      num_layers: 2           # Número de camadas ocultas
    
    reward_signals:
      extrinsic:
        gamma: 0.99           # Fator de desconto
        strength: 1.0         # Peso da recompensa extrínseca

    max_steps: 5000          # Número total de steps de treinamento
    time_horizon: 64         # Horizonte temporal para calcular retornos
    summary_freq: 100        # Frequência de logging (a cada N steps)

# Parâmetros de ambiente (enviados via Side Channel)
# Estes são recebidos no Unity via Academy.Instance.EnvironmentParameters
environment_parameters:
  currentLesson: 5           # Lição atual do curriculum
  maxHorizontal: 4.0         # Distância horizontal máxima
  steps: 1                   # Steps por decisão

# Configurações do engine Unity (enviadas via Side Channel)
# ⚠️ no_graphics NÃO é enviado - precisa ser argumento de linha de comando
engine_settings:
  width: 84                  # ✅ Largura da tela (menor = mais rápido)
  height: 84                 # ✅ Altura da tela (menor = mais rápido)
  quality_level: 0           # ✅ Qualidade gráfica (0=lowest, 5=highest)
  time_scale: 100.0          # ✅ Velocidade da simulação (100 = 100x mais rápido)
  target_frame_rate: -1      # ✅ FPS alvo (-1 = unlimited)
  capture_frame_rate: 0      # ✅ FPS de captura (0 = desabilitado)
  no_graphics: false         # ❌ Não é enviado via side channel (só documentação)

# Configurações do ambiente Unity
env_settings:
  base_port: 5004            # Porta base para comunicação gRPC
  num_envs: 1                # Número de ambientes paralelos (só 1 funciona por ora)
  num_areas: 1               # Número de training areas
  timeout_wait: 60           # Timeout de conexão (segundos)
  seed: -1                   # Seed para RNG (-1 = aleatório)

# Configurações de checkpoint
checkpoint_settings:
  run_id: ppo                # ID da run (usado para salvar checkpoints)
  results_dir: results       # Diretório para salvar resultados

# Configurações do PyTorch/Burn
torch_settings:
  device: cpu                # "cpu", "cuda", "metal" (verificado em runtime)

# Modo debug (verbose logging)
debug: false
